{% extends 'base.html' %}
{% load static socialaccount %}

{% block title %}Login - Lista de Presentes{% endblock %}

{% block content %}
<div class="-mx-4 -my-6 min-h-screen flex">

    <!-- Lado Esquerdo: Branding (oculto em mobile) -->
    <div class="hidden lg:flex w-1/2 bg-gradient-to-br from-primary to-secondary flex-col justify-center items-center p-16 relative overflow-hidden">
        <!-- Efeito de fundo -->
        <div class="absolute inset-0 opacity-10">
            <div class="absolute -top-20 -right-20 w-96 h-96 bg-white rounded-full animate-pulse-slow"></div>
            <div class="absolute -bottom-20 -left-20 w-80 h-80 bg-white rounded-full animate-pulse-slow" style="animation-delay:2s"></div>
        </div>

        <div class="relative z-10 text-center text-white max-w-lg">
            <!-- Ícone animado -->
            <div class="text-8xl mb-8" style="animation: float 3s ease-in-out infinite;">
                <i class="bi bi-gift-fill"></i>
            </div>

            <h1 class="text-4xl font-bold mb-4 text-shadow">Lista de Presentes de Natal</h1>
            <p class="text-lg opacity-90 mb-12 leading-relaxed">
                Organize suas listas de presentes de forma simples e inteligente.
                Nunca mais erre no presente de Natal!
            </p>

            <!-- Features -->
            <div class="space-y-4 text-left">
                <div class="flex items-center gap-4 p-4 rounded-xl bg-white/10 backdrop-blur-sm hover:bg-white/15 transition-all hover:translate-x-2">
                    <i class="bi bi-people-fill text-3xl text-yellow-300"></i>
                    <div>
                        <p class="font-semibold">Grupos Familiares</p>
                        <p class="text-sm opacity-90">Crie grupos e compartilhe listas</p>
                    </div>
                </div>
                <div class="flex items-center gap-4 p-4 rounded-xl bg-white/10 backdrop-blur-sm hover:bg-white/15 transition-all hover:translate-x-2">
                    <i class="bi bi-shield-check text-3xl text-yellow-300"></i>
                    <div>
                        <p class="font-semibold">Seguro e Privado</p>
                        <p class="text-sm opacity-90">Seus dados protegidos sempre</p>
                    </div>
                </div>
                <div class="flex items-center gap-4 p-4 rounded-xl bg-white/10 backdrop-blur-sm hover:bg-white/15 transition-all hover:translate-x-2">
                    <i class="bi bi-phone-fill text-3xl text-yellow-300"></i>
                    <div>
                        <p class="font-semibold">Acesse de Qualquer Lugar</p>
                        <p class="text-sm opacity-90">Responsivo e mobile-friendly</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Lado Direito: Formulário -->
    <div class="flex-1 flex items-center justify-center p-6 bg-base-100">
        <div class="card w-full max-w-md bg-base-200 shadow-2xl border border-base-300 animate-slide-up">
            <div class="card-body p-8">

                <!-- Header -->
                <div class="text-center mb-6">
                    <div class="lg:hidden text-5xl text-primary mb-4">
                        <i class="bi bi-gift-fill"></i>
                    </div>
                    <h2 class="card-title text-2xl font-bold justify-center">Bem-vindo de volta!</h2>
                    <p class="text-base-content/60 mt-1">Entre na sua conta para continuar</p>
                </div>

                <!-- Erros globais -->
                {% if form.non_field_errors %}
                <div role="alert" class="alert alert-error mb-4">
                    <i class="bi bi-exclamation-triangle-fill"></i>
                    <span>{{ form.non_field_errors.0 }}</span>
                </div>
                {% endif %}

                <!-- Formulário -->
                <form method="post" novalidate id="loginForm" class="space-y-4">
                    {% csrf_token %}

                    <!-- Email -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-medium">Email</span>
                        </label>
                        <label class="input input-bordered flex items-center gap-2 focus-within:input-primary">
                            <i class="bi bi-envelope-fill text-base-content/40"></i>
                            {{ form.email }}
                        </label>
                        {% if form.email.errors %}
                        <label class="label">
                            <span class="label-text-alt text-error">
                                <i class="bi bi-exclamation-circle"></i> {{ form.email.errors.0 }}
                            </span>
                        </label>
                        {% endif %}
                    </div>

                    <!-- Senha -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text font-medium">Senha</span>
                        </label>
                        <label class="input input-bordered flex items-center gap-2 focus-within:input-primary">
                            <i class="bi bi-lock-fill text-base-content/40"></i>
                            {{ form.password }}
                        </label>
                        {% if form.password.errors %}
                        <label class="label">
                            <span class="label-text-alt text-error">
                                <i class="bi bi-exclamation-circle"></i> {{ form.password.errors.0 }}
                            </span>
                        </label>
                        {% endif %}
                    </div>

                    <!-- Lembrar / Esqueceu -->
                    <div class="flex items-center justify-between text-sm">
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" name="remember" class="checkbox checkbox-primary checkbox-sm">
                            <span class="text-base-content/70">Lembrar-me</span>
                        </label>
                        <a href="{% url 'esqueceu_senha' %}" class="link link-primary text-sm">
                            Esqueceu a senha?
                        </a>
                    </div>

                    <!-- Botão Entrar -->
                    <button type="submit" id="loginBtn"
                            class="btn btn-primary w-full text-base font-semibold mt-2">
                        <i class="bi bi-box-arrow-in-right"></i>
                        Entrar
                    </button>
                </form>

                <!-- Divider -->
                <div class="divider text-base-content/40 text-xs uppercase tracking-widest">Ou entre com</div>

                <!-- Social Login -->
                <div class="grid grid-cols-2 gap-3">
                    <a href="{% provider_login_url 'google' %}"
                       class="btn btn-outline btn-sm gap-2 hover:border-red-500 hover:text-red-500">
                        <i class="bi bi-google"></i> Google
                    </a>
                    <a href="{% provider_login_url 'facebook' %}"
                       class="btn btn-outline btn-sm gap-2 hover:border-blue-600 hover:text-blue-600">
                        <i class="bi bi-facebook"></i> Facebook
                    </a>
                    <a href="{% provider_login_url 'linkedin_oauth2' %}"
                       class="btn btn-outline btn-sm gap-2 hover:border-blue-500 hover:text-blue-500">
                        <i class="bi bi-linkedin"></i> LinkedIn
                    </a>
                    <a href="{% provider_login_url 'apple' %}"
                       class="btn btn-outline btn-sm gap-2">
                        <i class="bi bi-apple"></i> Apple
                    </a>
                </div>

                <!-- Cadastro -->
                <div class="text-center mt-6 pt-4 border-t border-base-300">
                    <p class="text-base-content/60 text-sm">
                        Ainda não tem conta?
                        <a href="{% url 'registro' %}" class="link link-primary font-semibold">
                            Cadastre-se grátis
                        </a>
                    </p>
                </div>

                <!-- Security badge -->
                <div class="text-center text-xs text-base-content/30 flex items-center justify-center gap-1 mt-2">
                    <i class="bi bi-shield-check text-success"></i>
                    Conexão segura e criptografada
                </div>

            </div>
        </div>
    </div>
</div>

<style>
  /* Inputs sem fundo padrão (daisyUI override) */
  #loginForm input[type="email"],
  #loginForm input[type="password"] {
    background: transparent;
    border: none;
    outline: none;
    flex: 1;
    width: 100%;
  }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50%       { transform: translateY(-20px); }
  }
</style>
{% endblock %}

{% block extra_js %}
<script>
    const form = document.getElementById('loginForm');
    let submitting = false;

    form.addEventListener('submit', function() {
        if (submitting) return false;
        submitting = true;
        const btn = document.getElementById('loginBtn');
        btn.disabled = true;
        btn.innerHTML = '<span class="loading loading-spinner loading-sm"></span> Entrando...';
    });
</script>
{% endblock %}
